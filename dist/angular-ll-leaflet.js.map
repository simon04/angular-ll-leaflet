{"version":3,"file":"angular-ll-leaflet.js","sources":["../src/directives/divIcon.js","../src/directives/map.js","../src/directives/marker.js","../src/directives/popup.js","../src/directives/view.js","../src/index.js"],"sourcesContent":["  import L from 'leaflet';\n\n  export default [directive];\n\n  function directive() {\n    return {\n      restrict: 'E',\n      transclude: true,\n      require: '^llMarker',\n      scope: {\n        llDivIcon: '='\n      },\n      link: link\n    };\n\n    function link(scope, element, attrs, llMarker, transclude) {\n      transclude(function(html) {\n        var options = scope.llDivIcon || {};\n        options.elm = Array.prototype.filter.call(html, function(i) {\n          return i.nodeType !== Node.TEXT_NODE;\n        })[0];\n        var icon = L.icon(options);\n        icon.createIcon = function() {\n          this._setIconStyles(this.options.elm, 'icon');\n          return this.options.elm;\n        };\n        llMarker.getMarker().then(function(marker) {\n          marker.setIcon(icon);\n        });\n      });\n    }\n  }\n","  import L from 'leaflet';\n\n  export default ['$q', '$parse', directive];\n\n  function directive($q, $parse) {\n    return {\n      restrict: 'A', // leaflet needs a <div>\n      scope: {\n        llMap: '=',\n        llInit: '&'\n      },\n      link: link,\n      controller: controller\n    };\n\n    function link(scope, element, attrs, ctrl) {\n      var map = new L.Map(element[0], scope.llMap);\n      ctrl._map.resolve(map);\n      if (scope.llInit()) {\n        scope.llInit()(L, map);\n      }\n      element.bind('$destroy', function() {\n        map.remove();\n      });\n      [\n        'Click', 'Dblclick', 'Mousedown', 'Mouseup', 'Mouseover', 'Mouseout',\n        'Mousemove', 'Contextmenu', 'Focus', 'Blur', 'Preclick', 'Load',\n        'Unload', 'Viewreset', 'Movestart', 'Move', 'Moveend', 'Dragstart',\n        'Drag', 'Dragend', 'Zoomstart', 'Zoomend', 'Zoomlevelschange',\n        'Resize', 'Autopanstart', 'Layeradd', 'Layerremove',\n        'Baselayerchange', 'Overlayadd', 'Overlayremove', 'Locationfound',\n        'Locationerror', 'Popupopen', 'Popupclose'\n      ].map(function(eventName) {\n        if (attrs['ll' + eventName]) {\n          var handler = $parse(attrs['ll' + eventName]);\n          map.on(eventName.toLowerCase(), function(event) {\n            scope.$applyAsync(function() {\n              handler(scope.$parent, {$event: event});\n            });\n          });\n        }\n        return eventName;\n      });\n    }\n\n    function controller() {\n      this._map = $q.defer();\n      this.getMap = function() {\n        return this._map.promise;\n      };\n    }\n  }\n","  import angular from 'angular';\n  import L from 'leaflet';\n\n  export default ['$q', '$parse', directive];\n\n  function directive($q, $parse) {\n    return {\n      restrict: 'E',\n      scope: {\n        llMarker: '=',\n        llLatLng: '='\n      },\n      require: ['^llMap', 'llMarker'],\n      link: link,\n      controller: controller\n    };\n\n    function link(scope, element, attrs, controllers) {\n      var llMap = controllers[0];\n      var ctrl = controllers[1];\n      var marker = L.marker(scope.llLatLng, scope.llMarker);\n      ctrl._marker.resolve(marker);\n      llMap.getMap().then(function(map) {\n        marker.addTo(map);\n      });\n      scope.$watch('llLatLng', function(llLatLng) {\n        if (marker) {\n          marker.setLatLng(llLatLng);\n        }\n      }, true);\n      marker.on('dragend', function() {\n        scope.$applyAsync(function() {\n          if (angular.isArray(scope.llLatLng)) {\n            scope.llLatLng[0] = marker.getLatLng().lat;\n            scope.llLatLng[1] = marker.getLatLng().lng;\n          } else if (angular.isObject(scope.llLatLng)) {\n            scope.llLatLng.lat = marker.getLatLng().lat;\n            scope.llLatLng.lng = marker.getLatLng().lng;\n          }\n        });\n      });\n      [\n        'Click', 'Dblclick', 'Mousedown', 'Mouseover', 'Mouseout',\n        'Contextmenu', 'Add', 'Remove', 'Popupopen', 'Popupclose',\n        'Tooltipopen', 'Tooltipclose'\n      ].map(function(eventName) {\n        if (attrs['ll' + eventName]) {\n          var handler = $parse(attrs['ll' + eventName]);\n          marker.on(eventName.toLowerCase(), function(event) {\n            scope.$applyAsync(function() {\n              handler(scope.$parent, {$event: event});\n            });\n          });\n        }\n        return eventName;\n      });\n\n      element.bind('$destroy', function() {\n        llMap.getMap().then(function(map) {\n          map.removeLayer(marker);\n        });\n      });\n    }\n\n    function controller() {\n      this._marker = $q.defer();\n      this.getMarker = function() {\n        return this._marker.promise;\n      };\n    }\n  }\n","  export default [directive];\n\n  function directive() {\n    return {\n      restrict: 'E',\n      transclude: true,\n      require: '^llMarker',\n      link: link\n    };\n\n    function link(scope, element, attrs, llMarker, transclude) {\n      transclude(function(popup) {\n        var elm = Array.prototype.filter.call(popup, function(i) {\n          return i.nodeType !== Node.TEXT_NODE;\n        })[0];\n        llMarker.getMarker().then(function(marker) {\n          marker.bindPopup(elm);\n        });\n      });\n      element.bind('$destroy', function() {\n        llMarker.getMarker().then(function(marker) {\n          marker.unbindPopup();\n        });\n      });\n    }\n  }\n","  import angular from 'angular';\n\n  export default [directive];\n\n  function directive() {\n    return {\n      restrict: 'E',\n      scope: {\n        llView: '='\n      },\n      require: '^llMap',\n      link: link\n    };\n\n    function link(scope, element, attrs, llMap) {\n      llMap.getMap().then(function(map) {\n        map.on('zoomend', viewChanged);\n        map.on('moveend', viewChanged);\n        scope.$watch('llView', modelChanged, true);\n\n        function modelChanged() {\n          map.setView([scope.llView.lat, scope.llView.lng], scope.llView.zoom);\n        }\n\n        function viewChanged() {\n          var newCenter = {\n            lat: map.getCenter().lat,\n            lng: map.getCenter().lng,\n            zoom: map.getZoom()\n          };\n          scope.$applyAsync(function() {\n            angular.extend(scope.llView, newCenter);\n          });\n        }\n\n        element.bind('$destroy', function() {\n          map.off('zoomend', viewChanged);\n          map.off('moveend', viewChanged);\n        });\n      });\n    }\n  }\n","import angular from 'angular';\n\nimport divIcon from './directives/divIcon';\nimport map from './directives/map';\nimport marker from './directives/marker';\nimport popup from './directives/popup';\nimport view from './directives/view';\n\nexport default angular.module('ll-leaflet', [])\n  .directive('llDivIcon', divIcon)\n  .directive('llMap', map)\n  .directive('llMarker', marker)\n  .directive('llPopup', popup)\n  .directive('llView', view)\n  .name;\n"],"names":["directive"],"mappings":"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"}